### Needed for dconf
- name: Install psutils python-psutil package
  apt:
    name: "{{ packages }}"
  vars:
    packages:
    - python-psutil
    - psutils
### Set default Wallpaper
- name: Copy Default Wallpaper
  copy:
    src: files/Rubiks-HDPI.jpg
    dest: "/home/{{ myusername }}/Pictures/wallpaper.jpg"
### Set Wallpaper permission
- name: Set Wallpaper File Permissions
  file:
    path: "/home/{{ myusername }}/Pictures/wallpaper.jpg"
    owner: "{{ myusername }}"
    group: "{{ myusername }}"
    mode: 0775

### Set Wallpaper
- name: Set Default Wallpaper
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/desktop/background/picture-uri"
    value: "'file:///home/{{ myusername }}/Pictures/wallpaper.jpg'"
    state: present

### Set Lockscreen
- name: Set Default Lockscreen Wallpaper
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/desktop/screensaver/picture-uri"
    value: "'file:///home/{{ myusername }}/Pictures/wallpaper.jpg'"
    state: present

### Enable Nightlight
- name: Enable Nightlight
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/settings-daemon/plugins/color/night-light-enabled"
    value: "true"
    state: present

### Enable Keyboard shortcuts
- name: Changing Terminal Keyboard Shortcut
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/settings-daemon/plugins/media-keys/terminal"
    value: "'<Super>Return'"
    state: present

- name: Changing Close Application Keyboard Shortcut
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/desktop/wm/keybindings/close"
    value: "['<Super>q']"
    state: present

- name: Changing Run Application Keyboard Shortcut
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/desktop/wm/keybindings/panel-run-dialog"
    value: "['<Super>space']"
    state: present

### Change Touchpad Scroll Direction
- name: Changing Run Application Keyboard Shortcut
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/desktop/peripherals/touchpad/natural-scroll"
    value: "false"
    state: present

### Set theme to dark

- name: Set Theme to Dark
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/com/solus-project/budgie-panel/dark-theme"
    value: "true"
    state: present

### Show trash icon on the desktop
- name: Add Trash Icon to the Desktop
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/nautilus/desktop/trash-icon-visible"
    value: "true"
    state: present

### Show mounted volume icon on the desktop
- name: Add Mounted Volume Icon to the Desktop
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/nautilus/desktop/volumes-visible"
    value: "true"
    state: present

### Show home icon on the desktop
- name: Add Home Folder Icon to the Desktop
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/nautilus/desktop/home-icon-visible"
    value: "true"
    state: present

### Show network icon on the desktop
- name: Add Network Icons to the Desktop
  become: true
  become_user: "{{ myusername }}"
  dconf:
    key: "/org/gnome/nautilus/desktop/network-icon-visible"
    value: "false"
    state: present